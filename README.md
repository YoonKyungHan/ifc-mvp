# IFC Viewer MVP

BIM IFC ë„ë©´ íŒŒì¼ì„ ì›¹ì—ì„œ 3Dë¡œ ì‹œê°í™”í•˜ëŠ” ë·°ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

![IFC Viewer](https://img.shields.io/badge/Next.js-16.1.4-black)
![React](https://img.shields.io/badge/React-19.2.3-blue)
![Three.js](https://img.shields.io/badge/Three.js-0.176.0-green)
![web-ifc](https://img.shields.io/badge/web--ifc-0.0.74-orange)

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### ğŸ“ IFC íŒŒì¼ ë¡œë”©
- **ë“œë˜ê·¸ ì•¤ ë“œë¡­** ë˜ëŠ” íŒŒì¼ ì„ íƒìœ¼ë¡œ IFC íŒŒì¼ ì—…ë¡œë“œ
- **web-ifc** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ íŒŒì‹± (WebAssembly)
- ë¡œë”© ì§„í–‰ë¥  í‘œì‹œ
- ëŒ€ìš©ëŸ‰ íŒŒì¼ ì§€ì› (ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬)

### ğŸ¨ 3D ë Œë”ë§
- **Three.js + @react-three/fiber** ê¸°ë°˜ 3D ë Œë”ë§
- IFC ìš”ì†Œë³„ ìƒ‰ìƒ ë° ì¬ì§ˆ ì ìš©
- ìœ¤ê³½ì„ (Edge) ë Œë”ë§ On/Off
- ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì§€ì›
- ì•ˆí‹°ì•¨ë¦¬ì–´ì‹± ì ìš©

### ğŸ–±ï¸ ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤
- **OrbitControls** - íšŒì „, ì¤Œ, íŒ¬
- ë§ˆìš°ìŠ¤/í„°ì¹˜ ì œìŠ¤ì²˜ ì§€ì›
- ëª¨ë¸ ìë™ ì¤‘ì•™ ì •ë ¬ (Fit to View)

### âœ… ìš”ì†Œ ì„ íƒ
- í´ë¦­ìœ¼ë¡œ ê°œë³„ ìš”ì†Œ ì„ íƒ
- **ë™ì¼ íƒ€ì… ë‹¤ì¤‘ ì„ íƒ** - ê°™ì€ íƒ€ì…(ë²½, ê¸°ë‘¥ ë“±)ì˜ ìš”ì†Œ ì¼ê´„ ì„ íƒ
- ì„ íƒ ìš”ì†Œ íŒŒë€ìƒ‰ í•˜ì´ë¼ì´íŠ¸
- ì„ íƒ í•´ì œ ê¸°ëŠ¥
- **BVH ë ˆì´ìºìŠ¤íŒ…** - ëŒ€ìš©ëŸ‰ ëª¨ë¸ì—ì„œë„ ë¹ ë¥¸ ì„ íƒ

### ğŸ‘ï¸ X-Ray ëª¨ë“œ
- ì„ íƒëœ ìš”ì†Œë¥¼ ë‹¤ë¥¸ ìš”ì†Œë¥¼ í†µí•´ ë³¼ ìˆ˜ ìˆìŒ
- ê±´ë¬¼ ë‚´ë¶€ ìš”ì†Œ í™•ì¸ì— ìœ ìš©
- í† ê¸€ ë²„íŠ¼ìœ¼ë¡œ On/Off

### ğŸ¢ ì¸µë³„ í•„í„°
- **IfcBuildingStorey** ê¸°ë°˜ ì¸µ ì •ë³´ ì¶”ì¶œ
- ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì¸µ ì„ íƒ
- ì„ íƒí•œ ì¸µì˜ ìš”ì†Œë§Œ í‘œì‹œ
- ìì¬ í…Œì´ë¸”ë„ ì¸µë³„ í•„í„°ë§

### ğŸ“Š ìì¬ í…Œì´ë¸” (ìˆ˜ëŸ‰ ê²€í† )
- ì¹´í…Œê³ ë¦¬ë³„ ìì¬ ëª©ë¡ (êµ¬ì¡°, ê±´ì¶•, ê°€êµ¬ ë“±)
- **í’ˆëª…, ê·œê²©, ë©´ì /ìˆ˜ëŸ‰** ì •ë³´ í‘œì‹œ
- ê·œê²© ìë™ ê³„ì‚° (ê°€ë¡œ Ã— ì„¸ë¡œ Ã— ë†’ì´)
- ë©´ì (mÂ²) ìë™ ê³„ì‚°
- ê²€ìƒ‰ ê¸°ëŠ¥
- ìì¬ í´ë¦­ ì‹œ í•´ë‹¹ 3D ìš”ì†Œ ì„ íƒ
- ì¹´í…Œê³ ë¦¬ ì ‘ê¸°/í¼ì¹˜ê¸°
- ìš”ì†Œë³„ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€

### ğŸ—‚ï¸ ëª¨ë¸ íŠ¸ë¦¬
- IFC ê³µê°„ êµ¬ì¡° ê³„ì¸µ í‘œì‹œ
  - Project â†’ Site â†’ Building â†’ Storey â†’ Space
- íŠ¸ë¦¬ ë…¸ë“œ í´ë¦­ ì‹œ í•´ë‹¹ ìš”ì†Œ ì„ íƒ
- ì ‘ê¸°/í¼ì¹˜ê¸° ê¸°ëŠ¥

### ğŸ“ˆ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- **FPS í‘œì‹œ** (stats.js)
- ì¢Œì¸¡ í•˜ë‹¨ì— ì‹¤ì‹œê°„ ì„±ëŠ¥ ì •ë³´

### ğŸ­ í…Œì´ë¸”-3D ì—°ë™ í•˜ì´ë¼ì´íŠ¸
- 3Dì—ì„œ ìš”ì†Œ ì„ íƒ â†’ ìì¬ í…Œì´ë¸” ìë™ í•„í„°ë§
- í…Œì´ë¸”ì—ì„œ í–‰ í´ë¦­ â†’ í•´ë‹¹ ìš”ì†Œ ì´ˆë¡ìƒ‰ í•˜ì´ë¼ì´íŠ¸
- íŒŒë€ìƒ‰(3D ì„ íƒ) + ì´ˆë¡ìƒ‰(í…Œì´ë¸” ì„ íƒ) ì´ì¤‘ í•˜ì´ë¼ì´íŠ¸

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Next.js | 16.1.4 | React í”„ë ˆì„ì›Œí¬ (App Router) |
| React | 19.2.3 | UI ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| TypeScript | 5.x | íƒ€ì… ì•ˆì •ì„± |
| Tailwind CSS | 4.x | ìŠ¤íƒ€ì¼ë§ |

### 3D ë Œë”ë§
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Three.js | 0.176.0 | 3D ê·¸ë˜í”½ |
| @react-three/fiber | 9.5.0 | React + Three.js í†µí•© |
| @react-three/drei | 10.7.7 | Three.js ìœ í‹¸ë¦¬í‹° |
| three-mesh-bvh | 0.8.3 | BVH ë ˆì´ìºìŠ¤íŒ… ìµœì í™” |

### BIM/IFC
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| web-ifc | 0.0.74 | IFC íŒŒì¼ íŒŒì‹± (WASM) |

### UI ì»´í¬ë„ŒíŠ¸
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| shadcn/ui | UI ì»´í¬ë„ŒíŠ¸ (Button, Tabs, ScrollArea ë“±) |
| Radix UI | ì ‘ê·¼ì„± ìˆëŠ” UI í”„ë¦¬ë¯¸í‹°ë¸Œ |
| Lucide React | ì•„ì´ì½˜ |

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ifc-mvp/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ page.tsx                  # ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ globals.css               # ì „ì—­ ìŠ¤íƒ€ì¼
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ viewer/                   # ğŸ¯ IFC ë·°ì–´ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ index.tsx             # ë©”ì¸ ë·°ì–´ ì»¨í…Œì´ë„ˆ
â”‚   â”‚   â”œâ”€â”€ scene/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx         # 3D ì”¬ (ì¡°ëª…, ì¹´ë©”ë¼, ì„ íƒ)
â”‚   â”‚   â”‚   â””â”€â”€ materials.ts      # ì¬ì§ˆ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx         # ì‚¬ì´ë“œë°” ì»¨í…Œì´ë„ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ MaterialTable.tsx # ìì¬ í…Œì´ë¸”
â”‚   â”‚   â”‚   â”œâ”€â”€ ModelTree.tsx     # ëª¨ë¸ íŠ¸ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ StoreyFilter.tsx  # ì¸µë³„ í•„í„°
â”‚   â”‚   â”œâ”€â”€ toolbar/
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx         # ìƒë‹¨ íˆ´ë°”
â”‚   â”‚   â”œâ”€â”€ upload/
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx         # íŒŒì¼ ì—…ë¡œë“œ
â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”‚       â”œâ”€â”€ useSelection.ts   # ì„ íƒ ìƒíƒœ ê´€ë¦¬
â”‚   â”‚       â””â”€â”€ useVisibility.ts  # í‘œì‹œ/ìˆ¨ê¹€ ê´€ë¦¬
â”‚   â”‚
â”‚   â””â”€â”€ ui/                       # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useIFCLoader.ts           # ğŸ”§ IFC íŒŒì¼ ë¡œë” (í•µì‹¬)
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ ifc/                      # IFC ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ three/
â”‚       â”œâ”€â”€ index.ts              # Three.js ìœ í‹¸ë¦¬í‹° export
â”‚       â””â”€â”€ bvhRaycaster.ts       # BVH ë ˆì´ìºìŠ¤íŒ…
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ ifc.ts                    # IFC ê´€ë ¨ íƒ€ì… ì •ì˜
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ wasm/                     # âš ï¸ web-ifc WASM íŒŒì¼ (í•„ìˆ˜!)
â”‚   â”‚   â”œâ”€â”€ web-ifc.wasm
â”‚   â”‚   â”œâ”€â”€ web-ifc-mt.wasm
â”‚   â”‚   â””â”€â”€ web-ifc-node.wasm
â”‚   â””â”€â”€ logo.png
â”‚
â””â”€â”€ next.config.ts                # Next.js ì„¤ì •
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### ìš”êµ¬ì‚¬í•­
- Node.js 18.x ì´ìƒ
- npm ë˜ëŠ” yarn

### ì„¤ì¹˜

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-repo/ifc-mvp.git
cd ifc-mvp

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# WASM íŒŒì¼ ë³µì‚¬ (ì¤‘ìš”!)
cp node_modules/web-ifc/*.wasm public/wasm/
```

### ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm run dev
```

http://localhost:3000 ì—ì„œ í™•ì¸

### í”„ë¡œë•ì…˜ ë¹Œë“œ

```bash
npm run build
npm start
```

## âš™ï¸ í™˜ê²½ ì„¤ì •

### next.config.ts

```typescript
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  reactStrictMode: false,  // web-ifc í˜¸í™˜ì„±
  
  // WASM íŒŒì¼ ë¦¬ë‹¤ì´ë ‰íŠ¸
  async rewrites() {
    return [
      {
        source: "/_next/static/chunks/wasm/:path*",
        destination: "/wasm/:path*",
      },
    ];
  },
  
  webpack: (config) => {
    config.experiments = {
      ...config.experiments,
      asyncWebAssembly: true,
      syncWebAssembly: true,
    };
    return config;
  },
};

export default nextConfig;
```

## ğŸ”§ ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸

### IFC ë¡œë” (`hooks/useIFCLoader.ts`)

```typescript
const {
  isLoading,      // ë¡œë”© ìƒíƒœ
  progress,       // ì§„í–‰ë¥  (0-100)
  error,          // ì—ëŸ¬ ë©”ì‹œì§€
  loadIFC,        // íŒŒì¼ ë¡œë“œ í•¨ìˆ˜
  getMaterialList,// ìì¬ ëª©ë¡ ë°˜í™˜
  getStoreyList,  // ì¸µ ëª©ë¡ ë°˜í™˜
  getSpatialTree, // ê³µê°„ íŠ¸ë¦¬ ë°˜í™˜
} = useIFCLoader();
```

### ì„ íƒ ê´€ë¦¬ (`hooks/useSelection.ts`)

```typescript
const {
  selectedExpressIDs,    // ì„ íƒëœ ìš”ì†Œ ID ë°°ì—´
  handleElementSelect,   // ìš”ì†Œ ì„ íƒ í•¸ë“¤ëŸ¬
  handleMaterialSelect,  // ìì¬ ì„ íƒ í•¸ë“¤ëŸ¬
  handleClearSelection,  // ì„ íƒ í•´ì œ
} = useSelection(getElementsByType);
```

### í‘œì‹œ/ìˆ¨ê¹€ ê´€ë¦¬ (`hooks/useVisibility.ts`)

```typescript
const {
  hiddenExpressIDs,      // ìˆ¨ê²¨ì§„ ìš”ì†Œ ID
  selectedStorey,        // ì„ íƒëœ ì¸µ
  visibleExpressIDs,     // í‘œì‹œí•  ìš”ì†Œ ID (ì¸µ í•„í„°)
  handleToggleVisibility,// í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€
} = useVisibility(materials, storeys);
```

## ğŸ“ IFC íƒ€ì… ì§€ì›

| IFC íƒ€ì… | í•œê¸€ëª… | ì¹´í…Œê³ ë¦¬ |
|----------|--------|----------|
| IfcWall | ë²½ì²´ | êµ¬ì¡° |
| IfcWallStandardCase | ë²½ì²´(í‘œì¤€) | êµ¬ì¡° |
| IfcBeam | ë³´ | êµ¬ì¡° |
| IfcColumn | ê¸°ë‘¥ | êµ¬ì¡° |
| IfcSlab | ìŠ¬ë˜ë¸Œ | êµ¬ì¡° |
| IfcRoof | ì§€ë¶• | êµ¬ì¡° |
| IfcStair | ê³„ë‹¨ | êµ¬ì¡° |
| IfcWindow | ì°½ë¬¸ | ê±´ì¶• |
| IfcDoor | ë¬¸ | ê±´ì¶• |
| IfcCovering | ë§ˆê°ì¬ | ê±´ì¶• |
| IfcFurnishingElement | ê°€êµ¬ | ê°€êµ¬ |
| IfcFlowTerminal | ì„¤ë¹„ë‹¨ë§ | ì„¤ë¹„ |
| IfcRailing | ë‚œê°„ | ê¸°íƒ€ |

## ğŸ¨ UI/UX íŠ¹ì§•

- **ë‹¤í¬ ëª¨ë“œ ê¸°ë³¸** - ëˆˆì˜ í”¼ë¡œ ê°ì†Œ
- **ë°˜ì‘í˜• ì‚¬ì´ë“œë°”** - ì ‘ê¸°/í¼ì¹˜ê¸° ê°€ëŠ¥
- **ì§ê´€ì ì¸ íˆ´ë°”** - ì•„ì´ì½˜ + í…ìŠ¤íŠ¸ ë ˆì´ë¸”
- **ì‹¤ì‹œê°„ í”¼ë“œë°±** - ì„ íƒ, í˜¸ë²„ ì‹œ ì‹œê°ì  í”¼ë“œë°±
- **í”„ë¡œê·¸ë ˆìŠ¤ ë°”** - ë¡œë”© ì§„í–‰ ìƒíƒœ í‘œì‹œ

## âš¡ ì„±ëŠ¥ ìµœì í™”

1. **frameloop="demand"** - ë³€ê²½ ì‹œì—ë§Œ ë Œë”ë§
2. **BVH Raycasting** - ë¹ ë¥¸ ë§ˆìš°ìŠ¤ í”¼í‚¹
3. **Frustum Culling** - í™”ë©´ ë°– ê°ì²´ ì œì™¸
4. **ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬** - UI ë¸”ë¡œí‚¹ ë°©ì§€
5. **Material ìºì‹±** - ë™ì¼ ì¬ì§ˆ ì¬ì‚¬ìš©
6. **ëŒ€ìš©ëŸ‰ ìë™ ìµœì í™”** - 10,000+ ë©”ì‹œ ì‹œ ìœ¤ê³½ì„  ìë™ OFF

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

1. **That Open Components ë¯¸í˜¸í™˜** - Next.js 16 + React 19 í™˜ê²½ì—ì„œ @thatopen/components ì´ˆê¸°í™” ì‹¤íŒ¨
2. **ëŒ€ìš©ëŸ‰ íŒŒì¼** - 100MB ì´ìƒ íŒŒì¼ì€ ë¡œë”© ì‹œê°„ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆìŒ

## ğŸ“œ ë¼ì´ì„ ìŠ¤

MIT License

## ğŸ¤ ê¸°ì—¬

ì´ìŠˆì™€ PRì„ í™˜ì˜í•©ë‹ˆë‹¤!
